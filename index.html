<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix Content EDA Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #141414;
            color: #e5e5e5;
        }
        .container {
            max-width: 1200px;
        }
        .card {
            background-color: #1e1e1e;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }
        canvas {
            background-color: #1e1e1e;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            padding: 1rem;
        }
    </style>
</head>
<body class="p-6">
    <div class="container mx-auto">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-bold text-[#e50914] mb-2">Netflix Content EDA 2024</h1>
            <p class="text-xl text-gray-400">Uncovering trends in genre, geography, and release patterns from 8,000+ titles.</p>
        </header>

        <!-- Search and Filters Section -->
        <div class="card p-6 mb-8 flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-4">
            <div class="w-full md:w-1/2">
                <label for="search-input" class="block text-sm font-medium text-gray-400 mb-1">Search by Title</label>
                <input type="text" id="search-input" placeholder="e.g., Stranger Things" class="w-full p-2 rounded-md bg-gray-700 text-white border-none focus:ring-2 focus:ring-[#e50914] focus:outline-none">
            </div>
            <div class="w-full md:w-1/4">
                <label for="type-select" class="block text-sm font-medium text-gray-400 mb-1">Filter by Type</label>
                <select id="type-select" class="w-full p-2 rounded-md bg-gray-700 text-white border-none focus:ring-2 focus:ring-[#e50914] focus:outline-none">
                    <option value="All">All Content</option>
                    <option value="Movie">Movies</option>
                    <option value="TV Show">TV Shows</option>
                </select>
            </div>
            <div class="w-full md:w-1/4">
                <label for="country-select" class="block text-sm font-medium text-gray-400 mb-1">Filter by Country</label>
                <select id="country-select" class="w-full p-2 rounded-md bg-gray-700 text-white border-none focus:ring-2 focus:ring-[#e50914] focus:outline-none">
                    <!-- Options will be populated by JS -->
                </select>
            </div>
        </div>

        <!-- Main Dashboard Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Content Type Distribution -->
            <div class="card p-6">
                <h2 class="text-2xl font-semibold mb-4 text-[#e50914]">Content Type Distribution</h2>
                <p class="text-gray-400 mb-4">The proportion of movies vs. TV shows available on the platform.</p>
                <canvas id="contentTypeChart"></canvas>
            </div>

            <!-- Top Genres -->
            <div class="card p-6">
                <h2 class="text-2xl font-semibold mb-4 text-[#e50914]">Top 10 Most Popular Genres</h2>
                <p class="text-gray-400 mb-4">An overview of the most common genres in the catalog.</p>
                <canvas id="genreChart"></canvas>
            </div>

            <!-- Top Production Countries -->
            <div class="card p-6 lg:col-span-2">
                <h2 class="text-2xl font-semibold mb-4 text-[#e50914]">Top 10 Production Countries</h2>
                <p class="text-gray-400 mb-4">Countries with the highest number of titles produced.</p>
                <canvas id="countryChart"></canvas>
            </div>

            <!-- Titles Added per Year -->
            <div class="card p-6 lg:col-span-2">
                <h2 class="text-2xl font-semibold mb-4 text-[#e50914]">Titles Added to Netflix Over Time</h2>
                <p class="text-gray-400 mb-4">Growth of the content library over the years.</p>
                <canvas id="releaseYearChart"></canvas>
            </div>
        </div>
    </div>

    <!-- JavaScript for Data & Visualization -->
    <script>
        // Use a self-executing function to avoid polluting the global scope
        (function() {
            // Placeholder dataset - In a real-world scenario, this data would be
            // pre-processed using Python/Pandas/SQL and then exported to JSON.
            // This example contains a simplified, yet representative, dataset.
            const rawData = [
                { show_id: 's1', type: 'Movie', title: 'Dick Johnson Is Dead', director: 'Kirsten Johnson', cast: 'Unknown', country: 'United States', date_added: 'September 25, 2021', release_year: 2020, duration: '90 min', listed_in: 'Documentaries', description: 'A filmmaker\'s father faces death.' },
                { show_id: 's2', type: 'TV Show', title: 'Blood & Water', director: 'Nosipho Dumisa', cast: 'Ama Qamata', country: 'South Africa', date_added: 'September 24, 2021', release_year: 2021, duration: '2 Seasons', listed_in: 'International TV Shows, TV Dramas, TV Mysteries', description: 'A teen uncovers family secrets.' },
                { show_id: 's3', type: 'Movie', title: 'The Great Hack', director: 'Karim Amer', cast: 'Brittany Kaiser', country: 'United Kingdom', date_added: 'July 24, 2019', release_year: 2019, duration: '120 min', listed_in: 'Documentaries, International Movies', description: 'Exploring the Cambridge Analytica scandal.' },
                { show_id: 's4', type: 'TV Show', title: 'Money Heist', director: 'Alex Pina', cast: 'Úrsula Corberó', country: 'Spain', date_added: 'December 20, 2017', release_year: 2017, duration: '5 Seasons', listed_in: 'Crime TV Shows, International TV Shows, Spanish-Language TV Shows', description: 'A criminal mastermind orchestrates heists.' },
                { show_id: 's5', type: 'Movie', title: 'My Hero Academia: Heroes Rising', director: 'Kenji Nagasaki', cast: 'Daiki Yamashita', country: 'Japan', date_added: 'April 20, 2020', release_year: 2019, duration: '104 min', listed_in: 'Action & Adventure, Anime Features, International Movies', description: 'A group of young heroes face a new villain.' },
                { show_id: 's6', type: 'TV Show', title: 'The Crown', director: 'Stephen Daldry', cast: 'Claire Foy', country: 'United Kingdom', date_added: 'November 4, 2016', release_year: 2016, duration: '4 Seasons', listed_in: 'British TV Shows, TV Dramas', description: 'A historical drama about the reign of Queen Elizabeth II.' },
                { show_id: 's7', type: 'Movie', title: 'Bird Box', director: 'Susanne Bier', cast: 'Sandra Bullock', country: 'United States', date_added: 'December 21, 2018', release_year: 2018, duration: '124 min', listed_in: 'Horror Movies, Sci-Fi & Fantasy, Thrillers', description: 'A woman and children must survive a mysterious force.' },
                { show_id: 's8', type: 'Movie', title: 'Roma', director: 'Alfonso Cuarón', cast: 'Yalitza Aparicio', country: 'Mexico', date_added: 'December 14, 2018', release_year: 2018, duration: '135 min', listed_in: 'Dramas, International Movies', description: 'A year in the life of a middle-class family\'s housekeeper.' },
                { show_id: 's9', type: 'TV Show', title: 'Stranger Things', director: 'The Duffer Brothers', cast: 'Millie Bobby Brown', country: 'United States', date_added: 'July 15, 2016', release_year: 2016, duration: '4 Seasons', listed_in: 'Sci-Fi & Fantasy, TV Dramas, TV Thrillers', description: 'A boy disappears, and a supernatural mystery unfolds.' },
                { show_id: 's10', type: 'Movie', title: 'The Irishman', director: 'Martin Scorsese', cast: 'Robert De Niro', country: 'United States', date_added: 'November 27, 2019', release_year: 2019, duration: '209 min', listed_in: 'Dramas, Independent Movies, Thrillers', description: 'A mob hitman recalls his life.' },
                { show_id: 's11', type: 'Movie', title: 'Extraction', director: 'Sam Hargrave', cast: 'Chris Hemsworth', country: 'United States', date_added: 'April 24, 2020', release_year: 2020, duration: '116 min', listed_in: 'Action & Adventure, Dramas, International Movies', description: 'A black-market mercenary takes on a dangerous mission.' },
                { show_id: 's12', type: 'TV Show', title: 'Ozark', director: 'Jason Bateman', cast: 'Jason Bateman', country: 'United States', date_added: 'July 21, 2017', release_year: 2017, duration: '4 Seasons', listed_in: 'Crime TV Shows, TV Dramas, TV Thrillers', description: 'A financial adviser launders money for a drug cartel.' },
                { show_id: 's13', type: 'Movie', title: 'Marriage Story', director: 'Noah Baumbach', cast: 'Adam Driver', country: 'United States', date_added: 'December 6, 2019', release_year: 2019, duration: '137 min', listed_in: 'Dramas, Independent Movies, Romantic Movies', description: 'A stage director and his actress wife go through a coast-to-coast divorce.' },
                { show_id: 's14', type: 'TV Show', title: 'The Witcher', director: 'Lauren Schmidt Hissrich', cast: 'Henry Cavill', country: 'Poland', date_added: 'December 20, 2019', release_year: 2019, duration: '2 Seasons', listed_in: 'Action & Adventure, International TV Shows, TV Dramas', description: 'A mutant monster hunter finds his destiny.' },
                { show_id: 's15', type: 'Movie', title: 'Enola Holmes', director: 'Harry Bradbeer', cast: 'Millie Bobby Brown', country: 'United Kingdom', date_added: 'September 23, 2020', release_year: 2020, duration: '123 min', listed_in: 'Action & Adventure, Dramas', description: 'Sherlock Holmes\' teenage sister goes on a quest.' },
                { show_id: 's16', type: 'TV Show', title: 'Squid Game', director: 'Hwang Dong-hyuk', cast: 'Lee Jung-jae', country: 'South Korea', date_added: 'September 17, 2021', release_year: 2021, duration: '1 Season', listed_in: 'International TV Shows, TV Dramas, TV Thrillers', description: 'A deadly competition for a massive cash prize.' },
                { show_id: 's17', type: 'Movie', title: 'The Adam Project', director: 'Shawn Levy', cast: 'Ryan Reynolds', country: 'United States', date_added: 'March 11, 2022', release_year: 2022, duration: '106 min', listed_in: 'Action & Adventure, Sci-Fi & Fantasy, Comedies', description: 'A time traveler teams up with his younger self.' },
                { show_id: 's18', type: 'TV Show', title: 'Lupin', director: 'Louis Leterrier', cast: 'Omar Sy', country: 'France', date_added: 'January 8, 2021', release_year: 2021, duration: '2 Seasons', listed_in: 'Crime TV Shows, International TV Shows, French TV Shows', description: 'A master thief seeks revenge.' },
                { show_id: 's19', type: 'Movie', title: 'The Power of the Dog', director: 'Jane Campion', cast: 'Benedict Cumberbatch', country: 'New Zealand', date_added: 'December 1, 2021', release_year: 2021, duration: '126 min', listed_in: 'Dramas, Independent Movies', description: 'A charismatic rancher inspires fear and awe.' },
                { show_id: 's20', type: 'TV Show', title: 'Lupin', director: 'Louis Leterrier', cast: 'Omar Sy', country: 'France', date_added: 'January 8, 2021', release_year: 2021, duration: '2 Seasons', listed_in: 'Crime TV Shows, International TV Shows, French TV Shows', description: 'A master thief seeks revenge.' },
                { show_id: 's21', type: 'TV Show', title: 'The Queen\'s Gambit', director: 'Scott Frank', cast: 'Anya Taylor-Joy', country: 'United States', date_added: 'October 23, 2020', release_year: 2020, duration: '1 Season', listed_in: 'TV Dramas, Dramas, Period Dramas', description: 'An orphaned chess prodigy rises to fame.' },
                { show_id: 's22', type: 'Movie', title: 'The Gray Man', director: 'Anthony Russo', cast: 'Ryan Gosling', country: 'United States', date_added: 'July 22, 2022', release_year: 2022, duration: '129 min', listed_in: 'Action & Adventure, Thrillers', description: 'A CIA agent uncovers dark agency secrets.' },
                { show_id: 's23', type: 'Movie', title: 'Red Notice', director: 'Rawson Marshall Thurber', cast: 'Dwayne Johnson', country: 'United States', date_added: 'November 12, 2021', release_year: 2021, duration: '118 min', listed_in: 'Action & Adventure, Comedies, International Movies', description: 'An FBI profiler partners with a master art thief.' },
                { show_id: 's24', type: 'TV Show', title: 'You', director: 'Greg Berlanti', cast: 'Penn Badgley', country: 'United States', date_added: 'December 26, 2018', release_year: 2018, duration: '4 Seasons', listed_in: 'Crime TV Shows, Romantic TV Shows, TV Thrillers', description: 'A dangerously charming young man becomes obsessed.' },
                { show_id: 's25', type: 'Movie', title: 'Don\'t Look Up', director: 'Adam McKay', cast: 'Leonardo DiCaprio', country: 'United States', date_added: 'December 24, 2021', release_year: 2021, duration: '138 min', listed_in: 'Comedies, Dramas, Sci-Fi & Fantasy', description: 'Two astronomers embark on a media tour to warn about a comet.' },
                { show_id: 's26', type: 'TV Show', title: 'All of Us Are Dead', director: 'Lee Jae-kyoo', cast: 'Park Ji-hu', country: 'South Korea', date_added: 'January 28, 2022', release_year: 2022, duration: '1 Season', listed_in: 'International TV Shows, TV Dramas, TV Horror', description: 'A high school becomes ground zero for a zombie virus outbreak.' },
                { show_id: 's27', type: 'Movie', title: 'Glass Onion: A Knives Out Mystery', director: 'Rian Johnson', cast: 'Daniel Craig', country: 'United States', date_added: 'December 23, 2022', release_year: 2022, duration: '139 min', listed_in: 'Comedies, Crime Movies, Dramas', description: 'Detective Benoit Blanc travels to Greece.' },
                { show_id: 's28', type: 'TV Show', title: 'Wednesday', director: 'Tim Burton', cast: 'Jenna Ortega', country: 'United States', date_added: 'November 23, 2022', release_year: 2022, duration: '1 Season', listed_in: 'Comedies, Fantasy TV Shows, Teen TV Shows', description: 'Wednesday Addams tries to master her abilities.' },
                { show_id: 's29', type: 'Movie', title: 'The Kissing Booth 3', director: 'Vince Marcello', cast: 'Joey King', country: 'United States', date_added: 'August 11, 2021', release_year: 2021, duration: '113 min', listed_in: 'Comedies, Romantic Movies, Teen Movies', description: 'A teenager navigates college decisions.' },
                { show_id: 's30', type: 'TV Show', title: 'Money Heist: Korea – Joint Economic Area', director: 'Kim Hong-sun', cast: 'Yoo Ji-tae', country: 'South Korea', date_added: 'June 24, 2022', release_year: 2022, duration: '1 Season', listed_in: 'Action & Adventure, Crime TV Shows, International TV Shows', description: 'A new version of the hit show set in Korea.' },
                { show_id: 's31', type: 'Movie', title: 'The Conjuring', director: 'James Wan', cast: 'Vera Farmiga', country: 'United States', date_added: 'January 1, 2017', release_year: 2013, duration: '112 min', listed_in: 'Horror Movies, Thrillers', description: 'Paranormal investigators try to help a family.' },
                { show_id: 's32', type: 'Movie', title: 'Interstellar', director: 'Christopher Nolan', cast: 'Matthew McConaughey', country: 'United States', date_added: 'January 1, 2018', release_year: 2014, duration: '169 min', listed_in: 'Sci-Fi & Fantasy, Thrillers', description: 'A team of explorers travel through a wormhole.' },
                { show_id: 's33', type: 'TV Show', title: 'The Office (U.S.)', director: 'Greg Daniels', cast: 'Steve Carell', country: 'United States', date_added: 'January 1, 2021', release_year: 2005, duration: '9 Seasons', listed_in: 'TV Comedies', description: 'A mockumentary on a paper company.' }
            ];

            // Initialize charts and data processing
            document.addEventListener('DOMContentLoaded', () => {
                const searchInput = document.getElementById('search-input');
                const typeSelect = document.getElementById('type-select');
                const countrySelect = document.getElementById('country-select');

                let charts = {};
                let filteredData = [...rawData];

                // Initial data processing and chart creation
                updateAllCharts();
                populateCountryFilter();

                // Add event listeners for interactivity
                searchInput.addEventListener('input', updateDashboard);
                typeSelect.addEventListener('change', updateDashboard);
                countrySelect.addEventListener('change', updateDashboard);

                function updateDashboard() {
                    let tempFilteredData = rawData.filter(item => {
                        const matchesTitle = item.title.toLowerCase().includes(searchInput.value.toLowerCase());
                        const matchesType = typeSelect.value === 'All' || item.type === typeSelect.value;
                        const matchesCountry = countrySelect.value === 'All' || item.country.includes(countrySelect.value);
                        return matchesTitle && matchesType && matchesCountry;
                    });
                    filteredData = tempFilteredData;
                    updateAllCharts();
                }

                function populateCountryFilter() {
                    const countries = [...new Set(rawData.map(item => item.country).filter(Boolean))].sort();
                    countries.unshift('All');
                    countrySelect.innerHTML = countries.map(country => `<option value="${country}">${country}</option>`).join('');
                }

                function updateAllCharts() {
                    // Destroy existing charts to prevent memory leaks
                    if (charts.contentType) charts.contentType.destroy();
                    if (charts.genre) charts.genre.destroy();
                    if (charts.country) charts.country.destroy();
                    if (charts.releaseYear) charts.releaseYear.destroy();

                    charts.contentType = createContentTypeChart();
                    charts.genre = createGenreChart();
                    charts.country = createCountryChart();
                    charts.releaseYear = createReleaseYearChart();
                }

                function createContentTypeChart() {
                    const typeCounts = filteredData.reduce((acc, item) => {
                        acc[item.type] = (acc[item.type] || 0) + 1;
                        return acc;
                    }, {});

                    return new Chart(document.getElementById('contentTypeChart'), {
                        type: 'doughnut',
                        data: {
                            labels: Object.keys(typeCounts),
                            datasets: [{
                                data: Object.values(typeCounts),
                                backgroundColor: ['#e50914', '#b8b8b8'],
                                hoverOffset: 10,
                                borderColor: '#1e1e1e'
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    labels: {
                                        color: '#e5e5e5',
                                        font: {
                                            size: 14,
                                        }
                                    }
                                },
                                datalabels: {
                                    formatter: (value, context) => {
                                        const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                        const percentage = (value / total * 100).toFixed(1) + '%';
                                        return percentage;
                                    },
                                    color: '#fff',
                                    font: {
                                        weight: 'bold'
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            let label = context.label || '';
                                            if (label) {
                                                label += ': ';
                                            }
                                            label += context.parsed;
                                            return label;
                                        }
                                    }
                                }
                            }
                        },
                        plugins: [ChartDataLabels]
                    });
                }

                function createGenreChart() {
                    const genreCounts = filteredData.reduce((acc, item) => {
                        if (item.listed_in) {
                            item.listed_in.split(', ').forEach(genre => {
                                acc[genre] = (acc[genre] || 0) + 1;
                            });
                        }
                        return acc;
                    }, {});

                    const sortedGenres = Object.entries(genreCounts).sort(([, a], [, b]) => b - a).slice(0, 10);
                    const labels = sortedGenres.map(([key]) => key);
                    const data = sortedGenres.map(([, value]) => value);

                    return new Chart(document.getElementById('genreChart'), {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Number of Titles',
                                data: data,
                                backgroundColor: '#e50914',
                                borderColor: '#e50914',
                                borderWidth: 1,
                                borderRadius: 6
                            }]
                        },
                        options: {
                            responsive: true,
                            indexAxis: 'y',
                            scales: {
                                x: {
                                    ticks: { color: '#e5e5e5' },
                                    grid: { color: 'rgba(229, 229, 229, 0.1)' }
                                },
                                y: {
                                    ticks: { color: '#e5e5e5' },
                                    grid: { color: 'rgba(229, 229, 229, 0.1)' }
                                }
                            },
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return `Titles: ${context.parsed.x}`;
                                        }
                                    }
                                }
                            }
                        }
                    });
                }

                function createCountryChart() {
                    const countryCounts = filteredData.reduce((acc, item) => {
                        if (item.country) {
                            const countries = item.country.split(', ').map(c => c.trim());
                            countries.forEach(country => {
                                acc[country] = (acc[country] || 0) + 1;
                            });
                        }
                        return acc;
                    }, {});

                    const sortedCountries = Object.entries(countryCounts).sort(([, a], [, b]) => b - a).slice(0, 10);
                    const labels = sortedCountries.map(([key]) => key);
                    const data = sortedCountries.map(([, value]) => value);

                    return new Chart(document.getElementById('countryChart'), {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Number of Titles',
                                data: data,
                                backgroundColor: '#b8b8b8',
                                borderColor: '#b8b8b8',
                                borderWidth: 1,
                                borderRadius: 6
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                x: {
                                    ticks: { color: '#e5e5e5' },
                                    grid: { color: 'rgba(229, 229, 229, 0.1)' }
                                },
                                y: {
                                    ticks: { color: '#e5e5e5' },
                                    grid: { color: 'rgba(229, 229, 229, 0.1)' }
                                }
                            },
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return `Titles: ${context.parsed.y}`;
                                        }
                                    }
                                }
                            }
                        }
                    });
                }

                function createReleaseYearChart() {
                    const releaseYearCounts = filteredData.reduce((acc, item) => {
                        const year = new Date(item.date_added).getFullYear();
                        if (year) {
                            acc[year] = (acc[year] || 0) + 1;
                        }
                        return acc;
                    }, {});

                    const sortedYears = Object.entries(releaseYearCounts).sort(([yearA], [yearB]) => parseInt(yearA) - parseInt(yearB));
                    const labels = sortedYears.map(([year]) => year);
                    const data = sortedYears.map(([, count]) => count);

                    return new Chart(document.getElementById('releaseYearChart'), {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Titles Added',
                                data: data,
                                borderColor: '#e50914',
                                backgroundColor: 'rgba(229, 9, 20, 0.2)',
                                tension: 0.3,
                                fill: true,
                            }]
                        },
                        options: {
                            responsive: true,
                            scales: {
                                x: {
                                    ticks: { color: '#e5e5e5' },
                                    grid: { color: 'rgba(229, 229, 229, 0.1)' }
                                },
                                y: {
                                    ticks: { color: '#e5e5e5' },
                                    grid: { color: 'rgba(229, 229, 229, 0.1)' }
                                }
                            },
                            plugins: {
                                legend: { display: true, labels: { color: '#e5e5e5' } },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false
                                }
                            }
                        }
                    });
                }
            });
        })();
    </script>
</body>
</html>
